parameters:

    bass.listener.constructor: conga-bass:bass

services:

    # the bass kernel listener
    bass.listener:
        constructor: "%bass.listener.constructor%"
        tags:
            # respond to kernel.compile so we can build bass using the conga configuration object
            # and initialize everything in the global service container
            - { name: kernel.event, event: kernel.compile, method: onKernelCompile, priority: 1 }

            # respond to the request_scope event so we can wrap the bass service into a request scope
            - { name: kernel.event, event: kernel.request_scope, method: onRequestScope, priority: -1 }

    bass.profiler.collector:
        scope: request
        constructor: conga-bass:collector/BassDataCollector
        tags:
            - { name: profiler.data_collector, priority: 4 }